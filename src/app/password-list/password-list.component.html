<comp-navbar></comp-navbar>
<div class="container mx-auto mt-8 mb-10">
   <!-- alert -->
   <div *ngIf="isSuccess" class="mx-3 p-5 my-3 bg-teal-100 text-teal-900 rounded">
      {{ successMessage }}
   </div>

   <!-- form -->
   <div class="flex flex-wrap justify-center items-center gap-4 m-3">
      <div class="shadow-lg border-2 border-gray-900">
         <img [src]="siteImgURL" alt="" class="w-96">
         <h3 class=" text-xl font-bold m-3">{{siteName}}</h3>
         <div class="break-words mx-2 my-3 px-3 bg-blue-200 text-blue-800 rounded-lg text-sm">
            <a [href]="siteURL" target="_blank" >{{siteURL}}</a>
         </div>
      </div> 
      <div class="px-7 py-5 border-2 border-gray-900">
         <h2 class="text-3xl text-center">{{formState}} User & Password</h2>
         <p class="mb-5 text-center">You can {{formState}} user & password from the below form.</p>
         <form #form="ngForm" (submit)="onSubmit(form.value)">
            <div class="flex flex-col">
               <label class="text-lg font-medium mb-2">Username</label>
               <input [(ngModel)]="username" type="text" name="username" class="border-2 border-gray-900 p-2 rounded-lg w-full">
            </div>
            <div class="flex flex-col">
               <label class="text-lg font-medium mb-2">Email</label>
               <input [(ngModel)]="email" type="email" name="email" class="border-2 border-gray-900 p-2 rounded-lg w-full">
            </div>
            <div class="flex flex-col">
               <label class="text-lg font-medium mb-2">PassWord</label>
               <input [(ngModel)]="password" type="password" name="password" class="border-2 border-gray-900 p-2 rounded-lg w-full">
            </div>
            <button class="mt-5 mx-0.5 px-5 py-3 text-sm bg-gray-900 text-white shadow rounded-md">
               {{formState}} Password
            </button>
         </form>
         <button (click)="onCancel()" class="mt-2 mx-0.5 px-5 py-3 text-sm border-2 border-gray-900 text-gray-900 shadow rounded-md">
            Cancel
         </button>
      </div>
   </div>

   <!-- data -->
   <div class="grid grid-rows-2 mt-10 mx-3 max-sm:mx-2 max-sm:grid-cols-4">
      <div class="grid sm:grid-cols-5 max-sm:grid-cols-1 max-sm:text-base border-2 max-sm:border-b-2 max-sm:border-l-2 max-sm:border-r-2 max-sm:border-0 border-black bg-gray-200 text-center items-center font-semibold text-lg">
         <div class="border-r-2 max-sm:border-r-0 max-sm:border-t-2 max-sm:h-12 max-sm:pt-2 border-black">Username</div>
         <div class="border-r-2 max-sm:border-t-2 max-sm:border-r-0 max-sm:h-12 max-sm:pt-2 border-black">Email</div>
         <div class="sm:col-span-2 max-sm:border-t-2 border-r-2 max-sm:border-r-0 max-sm:h-12 max-sm:pt-2 border-black">Password</div>
         <div class="max-sm:border-t-2 max-sm:pt-2 border-black max-sm:h-12">Action</div>
      </div>
      <div class="grid sm:grid-cols-5 max-sm:col-span-3 max-sm:grid-cols-1 max-sm:text-base border-2 max-sm:border-0 border-t-0 max-sm:border-t-2 max-sm:border-l-0 border-black text-center items-center h-12" *ngFor="let p of passwordList; let i = index">
         <div class="border-r-2 max-sm:border-b-2 border-black max-sm:h-12 max-sm:pt-2">{{ p.username }}</div>
         <div class="border-r-2 max-sm:border-b-2 max-sm:h-12 border-black max-sm:pt-2">{{ p.email }}</div>
         <div class="break-words sm:col-span-2 max-sm:h-12 max-sm:border-b-2 max-sm:row-span-2 max-sm:text-sm border-r-2 border-black">{{ p.password }}
            <button *ngIf="isDecrypted" (click)="onDecrypt(p.password, i)" class="mx-0.5 px-3 py-1 text-sm bg-red-400 text-white shadow rounded-md max-sm:px-1 max-sm:py-0.5">Decrypt</button>
            <button *ngIf="!isDecrypted" (click)="onEncrypt(p.password, i)" class="mx-0.5 px-3 py-1 text-sm bg-red-400 text-white shadow rounded-md max-sm:px-1 max-sm:py-0.5">Encrypt</button>
         </div>
         <div class="max-sm:h-12 max-sm:border-b-2 max-sm:border-r-2 border-black max-sm:pt-2">
            <button (click)="editPassword(p.username, p.email, p.password, p.id)" class="mx-0.5 px-3 py-1 text-sm border-2 bg-gray-900 text-white shadow rounded-md max-sm:px-1 max-sm:py-0.5">Edit</button>
            <button (click)="deletePassword(p.id)" class="mx-0.5 px-3 py-1 text-sm border-2 border-gray-900 text-gray-900 shadow rounded-md max-sm:px-1 max-sm:py-0.5">
            Delete</button>
         </div>
      </div>
   </div>

</div>